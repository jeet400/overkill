<%- include('../components/template') %>
<main id="content" class="min-h-screen text-gray-300 bg-[#121212]">
  <div class="flex flex-col items-center px-6 py-10">
    <div class="text-center mb-8">
      <h2 class="text-4xl font-bold text-white drop-shadow-lg"><%= req.translations.overviewText %></h2>
    </div>

    <section class="w-full max-w-6xl mb-12">
      <div class="bg-gradient-to-br from-[#1c1c1c] to-[#252525] p-10 rounded-2xl border border-gray-700 shadow-2xl">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
          <!-- Image Section -->
          <div class="max-w-md mx-auto">
            <img src="https://raw.githubusercontent.com/jeet400/OverSee-v2/refs/heads/main/overkill.png" 
                 alt="OverSee" class="w-full h-auto rounded-xl shadow-lg">
          </div>
          
          <!-- Text and Description Section -->
          <div>
            <script>
              async function fetchVersion() {
                try {
                  const response = await fetch('https://hydrenllc.us.kg/panel.json', { cache: 'no-store' });
                  if (!response.ok)                    throw new Error(`HTTP error! Status: ${response.status}`);
                  }
                  const data = await response.json();
                  if (!data.hydra || !data.hydra.panel_latest) {
                    throw new Error('Invalid response structure');
                  }
                  const currentVersion = '<%= version %>';
                  const latestVersion = data.hydra.panel_latest;
                  const versionSpan = document.getElementById('currentVersion');
                  const versionStatusSpan = document.getElementById('versionStatus');
                  versionSpan.textContent = currentVersion;
                  
                  if (currentVersion === latestVersion) {
                    versionStatusSpan.innerHTML = '<span class="text-green-400">âœ” ' + 
                      '<%= req.translations.runningLatestVersion %></span>';
                  } else {
                    versionStatusSpan.innerHTML = `
                      <span class="text-amber-400 font-medium">New version ${latestVersion} available! </span>
                      <a href="https://github.com/HydraLabs-beta/panel/releases/tag/${latestVersion}" 
                         class="text-blue-400 hover:underline">Download here</a>`;
                  }
                } catch (err) {
                  console.error(err);
                }
              }
              fetchVersion();
            </script>
            <p class="mt-2 text-lg font-light text-gray-300">
              <%= req.translations.sysInfoText %> <span id="currentVersion"></span>. 
              <span id="versionStatus" class="font-medium"></span>
            </p>
          </div>
        </div>
      </div>
    </section>

    <section class="w-full max-w-6xl">
      <div class="text-center mb-6">
        <h2 class="text-4xl font-bold text-white drop-shadow-lg">Platform Statistics</h2>
      </div>
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
        <% const stats = [
          { title: 'Total Users', value: usersTotal, icon: 'fa-users', color: 'text-blue-400' },
          { title: 'Active Servers', value: instancesTotal, icon: 'fa-server', color: 'text-green-400' },
          { title: 'Total Nodes', value: nodesTotal, icon: 'fa-network-wired', color: 'text-purple-400' }
        ]; %>
        <% stats.forEach(stat => { %>
          <div class="bg-gradient-to-br from-[#1c1b1b] via-[#23232a] to-[#252525] p-6 rounded-xl border border-white/20 hover:scale-105 hover:blur-[2px] transition-all duration-300 shadow-lg flex flex-col items-center text-center shimmer">
            <span class="status-icon <%= stat.color %> mb-2"><i class="fas <%= stat.icon %> text-3xl"></i></span>
            <p class="text-sm font-medium text-white/70"><%= stat.title %></p>
            <p class="mt-2 text-3xl font-bold text-white drop-shadow-md"><%= stat.value %></p>
          </div>
        <% }); %>
      </div>
    </section>
  </div>
</main>

<%- include('../components/footer') %>

<style>
@keyframes gradient-move {
  0% { background-position: 0% 50%; }
  100% { background-position: 100% 50%; }
}
.bg-gradient-to-br {
  background: linear-gradient(270deg, #1c1c1b, #23232a, #252525, #1c1c1b);
  background-size: 600% 600%;
  animation: gradient-move 8s ease-in-out infinite;
}
@keyframes shimmer {
  0% { background-position: -200px 0; }
  100% { background-position: 200px 0; }
}
.shimmer {
  background: linear-gradient(90deg, rgba(59,130,246,0.08) 25%, rgba(59,130,246,0.16) 50%, rgba(59,130,246,0.08) 75%);
  background-size: 400px 100%;
  animation: shimmer 2s infinite linear;
}
</style>
